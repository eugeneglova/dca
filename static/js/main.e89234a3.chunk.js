(this.webpackJsonpdca=this.webpackJsonpdca||[]).push([[0],{66:function(e,t,n){e.exports=n(77)},77:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(12),o=n.n(i),c=n(24),u=n(48),l=n.n(u),m=n(17),s=n.n(m),p=function(e){var t=Math.abs(e);return t<5e-4?6:t<.005?5:t<.05?4:t<.5?3:t<1||t<1e3?2:t<1e4?1:0},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p(e);return Math.floor(e*Math.pow(10,t))/Math.pow(10,t)},d=function(e,t){return f(e*t)},g=function(e,t,n,r){var a=(t-e)*n,i=t*Math.abs(n)*r;return f(a-i)},v=function(e,t,n){var r=g(e,t,n,0),a=function(e,t,n){var r=Math.abs(n);return n<0?Math.max(r*e,r*t,0):Math.max(r*e,0)}(e,t,n);return r&&0!==a?r/a*100:0},b=function(e,t,n,r){var a=function(e,t,n,r){return f((d(e,t)+d(n,r))/(t+r))}(e,t,n,r),i=f(t+r),o=g(a,n,i,.002),c=f(v(a,n,i));return{id:s.a.uniqueId(),price:a,amount:i,op:n,oa:r,pl:o,plp:c}},P=function(e,t){return f(parseFloat(e)+parseFloat(e)*(parseFloat(t)/100))},E=function(e,t,n,r){return f(e+n*e*t*Math.log10(1.3*(r+2)))},h=function(e,t,n){return f(e*t)},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length-1;return e.reduce((function(e,n,r){if(r>t)return e;var a=s.a.isEmpty(e)?{price:0,amount:0}:e,i=a.price,o=a.amount;return b(i,o,parseFloat(n.op),parseFloat(n.oa))}),{})},y=function(e){for(var t=e.entryPrice,n=void 0===t?6046.3:t,r=e.entryAmount,a=void 0===r?.001:r,i=e.pricePercent,o=void 0===i?-10:i,c=e.xPrice,u=void 0===c?.009:c,l=e.xAmount,m=void 0===l?1.35:l,p=[],f=parseFloat(n),d=parseFloat(a),g=Math.sign(o),v=P(parseFloat(n),parseFloat(o));f*g<g*v;){p.push({id:s.a.uniqueId(),op:f,oa:d});var b=p.length-1;f=E(f,u,g,b),d=h(d,m)}return p},C=function(e,t){return t.map((function(t){var n=t.op,r=t.oa,a={type:"LIMIT",symbol:e.symbol,flags:0,price:String(n),amount:String(r),meta:{lev:e.leverage?e.leverage:void 0,aff_code:e.aff_code}};return"__dispatch("+JSON.stringify({type:"WS_REQUEST_SEND",meta:{isPublic:!1,throttle:!0},payload:JSON.stringify([0,"on",null,a])})+")"})).join("\n")},x=function(e,t){return t.map((function(t){var n=t.op,r=t.oa,a={symbol:e.symbol,quantity:Math.abs(r),type:"LIMIT",timeInForce:"GTC",leverage:e.leverage,side:r>0?"BUY":"SELL",stopPrice:null,workingType:null,positionSide:r>0?"LONG":"SHORT",price:String(n)};return"__NEXT_REDUX_STORE__.dispatch("+JSON.stringify({type:"futuresOrderForm/placeOrder",payload:a})+")"})).join("\n")},S=n(42),j=n(41),A=n(56),M=n(8),w=n(25),F=function(e){return e.id},I=function(e){var t=e.onClick,n=Object(A.a)(e,["onClick"]);return a.a.createElement(w.b.Cell,Object.assign({},n,{tabIndex:0,onFocus:t}))};var _=function(e){var t=e.rows,n=e.columns,i=e.onChange,o=void 0===i?function(){}:i,u=Object(r.useState)(t),l=Object(c.a)(u,2),m=l[0],s=l[1],p=Object(r.useState)([]),f=Object(c.a)(p,2),d=f[0],g=f[1];Object(r.useEffect)((function(){s(t)}),[t]);var v=function(e){var t,n=e.added,r=e.changed,a=e.deleted;if(n){var i=m.length>0?m[m.length-1].id+1:0;t=[].concat(Object(j.a)(m),Object(j.a)(n.map((function(e,t){return Object(S.a)({id:i+t},e)}))))}if(r&&(t=m.map((function(e){return r[e.id]?Object(S.a)({},e,{},r[e.id]):e}))),a){var c=new Set(a);t=m.filter((function(e){return!c.has(e.id)}))}s(t),o(t)};return a.a.createElement(w.a,{rows:m,columns:n,getRowId:F},a.a.createElement(M.c,{onCommitChanges:v,editingCells:d,onEditingCellsChange:g,addedRows:[],onAddedRowsChange:function(){return v({added:[{}]})}}),a.a.createElement(w.b,{cellComponent:I}),a.a.createElement(w.d,null),a.a.createElement(w.e,{selectTextOnEditStart:!0}),a.a.createElement(w.c,{showAddCommand:!0,showDeleteCommand:!0}))};var T=function(){var e=Object(r.useState)({id:"settings",symbol:"tBTCF0:USTF0",entryPrice:9e3,entryAmount:.005,pricePercent:-10,xPrice:.011,xPositionAmount:0,xAmount:2,leverage:25,aff_code:"Uv2r2svs8",fee:.075,log:1}),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)(y(n)),u=Object(c.a)(o,2),m=u[0],p=u[1],b=Object(r.useState)(function(e){var t=O(e);return[{id:"exit1",price:t.price,amount:t.amount,exitPrice:P(t.price,1)},{id:"exit2",price:t.price,amount:t.amount,exitPrice:P(t.price,2)},{id:"exit3",price:t.price,amount:t.amount,exitPrice:P(t.price,3)}]}(m)),E=Object(c.a)(b,2),h=E[0],S=E[1];Object(r.useEffect)((function(){p(y(n))}),[n]);var j,A=[{name:"symbol",title:"Symbol"},{name:"entryPrice",title:"Entry Price"},{name:"entryAmount",title:"Entry Amount"},{name:"pricePercent",title:"Price Percent"},{name:"price",title:"Price",getCellValue:function(e){return P(e.entryPrice,e.pricePercent)}},{name:"xPrice",title:"x Price"},{name:"xAmount",title:"x Amount"},{name:"leverage",title:"Leverage"},{name:"aff_code",title:"Ref"},{name:"fee",title:"Fee"},{name:"log",title:"Log"}],M=function(e){var t={bitfinex:C,binancefutures:x}[e](n,m);console.log(t),l()(t)};return a.a.createElement("div",null,a.a.createElement("center",null,a.a.createElement("h3",null,"Settings")),a.a.createElement(_,{rows:[n],columns:A,onChange:function(e){return i(e[0])}}),a.a.createElement("center",null,a.a.createElement("h3",null,"Positions / Orders")),a.a.createElement("button",{onClick:function(){return p([])}},"Clear positions / orders"),a.a.createElement("button",{onClick:function(){var e=JSON.parse(prompt("copy(__state().data)"));if(e){var t=s.a.filter(e.positions,(function(e){return"ACTIVE"===e.status})).map((function(e){var t=e.id,n=e.basePrice;return{id:t,price:n,amount:e.amount,exitPirce:n}}));S(t);var r=s.a.filter(e.positions,(function(e){return e.pair===n.symbol&&"ACTIVE"===e.status})).map((function(e){return{id:e.id,op:e.basePrice,oa:e.amount}})),a=s.a.filter(e.orders.all,(function(e){return e.symbol===n.symbol.slice(1)&&"ACTIVE"===e.status&&"LIMIT"===e.type&&Math.sign(e.amount)===Math.sign(n.entryAmount)})).map((function(e){return{id:e.id,op:e.price,oa:e.amount}})),i=s.a.orderBy(a,["op"],[Math.sign(n.entryAmount)<0?"asc":"desc"]);p(r.concat(i))}}},"Import Data"),a.a.createElement("button",{onClick:function(){return M("bitfinex")}},"Copy Bitfinex orders"),a.a.createElement("button",{onClick:function(){return M("binancefutures")}},"Copy Binance Futures orders"),a.a.createElement(_,{rows:m,columns:(j=m,[{name:"price",title:"Pos Price",getCellValue:function(e){return O(j,j.indexOf(e)).price}},{name:"price diff",title:"Pos Price diff",getCellValue:function(e){var t=O(j,j.indexOf(e)-1).price,n=t-O(j,j.indexOf(e)).price,r=n/t*100;return"".concat(f(n||0)," (").concat(f(r||0,2),"%)")}},{name:"amount",title:"Pos Amount",getCellValue:function(e){return O(j,j.indexOf(e)).amount}},{name:"pc",title:"Pos Cost",getCellValue:function(e){var t=O(j,j.indexOf(e)),n=t.price,r=t.amount;return d(n,r)}},{name:"op",title:"Ord Price"},{name:"opp",title:"Ord Price diff",getCellValue:function(e){var t=(j[j.indexOf(e)-1]||{}).op,n=t-e.op,r=n/t*100;return"".concat(f(n||0)," (").concat(f(r||0,2),"%)")}},{name:"oa",title:"Ord Amount"},{name:"oc",title:"Ord Cost",getCellValue:function(e){return d(e.op,e.oa)}},{name:"pl",title:"P/L",getCellValue:function(e){var t=O(j,j.indexOf(e)),n=t.pl,r=t.plp;return"".concat(f(n,3)," (").concat(f(r,2),"%)")}}]),onChange:p}),a.a.createElement("center",null,a.a.createElement("h3",null,"Profit / Loss")),a.a.createElement(_,{rows:h,columns:[{name:"price",title:"Pos Price"},{name:"amount",title:"Pos Amount"},{name:"exitPrice",title:"Exit Price"},{name:"pl",title:"P/L",getCellValue:function(e){var t=g(e.price,e.exitPrice,e.amount,.002),n=v(e.price,e.exitPrice,e.amount);return"".concat(f(t,3)," (").concat(f(n,2),"%)")}}],onChange:S}))};o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(T,null)),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.e89234a3.chunk.js.map