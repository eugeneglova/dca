(this.webpackJsonpdca=this.webpackJsonpdca||[]).push([[0],{66:function(e,t,n){e.exports=n(77)},77:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(12),o=n.n(i),c=n(24),u=n(48),l=n.n(u),m=n(21),s=n.n(m),f=function(e){var t=Math.abs(e);return t<5e-4?6:t<.005?5:t<.05?4:t<.5?3:t<1||t<1e3?2:t<1e4?1:0},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f(e);return Math.floor(e*Math.pow(10,t))/Math.pow(10,t)},d=function(e,t){return p(e*t)},v=function(e,t,n,r){var a=(t-e)*n,i=t*Math.abs(n)*r;return p(a-i)},g=function(e,t,n){var r=v(e,t,n,0),a=function(e,t,n){var r=Math.abs(n);return n<0?Math.max(r*e,r*t,0):Math.max(r*e,0)}(e,t,n);return r&&0!==a?r/a*100:0},P=function(e,t,n,r){var a=function(e,t,n,r){return p((d(e,t)+d(n,r))/(t+r))}(e,t,n,r),i=p(t+r),o=v(a,n,i,.002),c=p(g(a,n,i));return{id:s.a.uniqueId(),price:a,amount:i,op:n,oa:r,pl:o,plp:c}},b=function(e,t){return p(parseFloat(e)+parseFloat(e)*(parseFloat(t)/100))},h=function(e,t,n,r){return p(e+n*e*t*Math.log10(1.3*(r+2)))},E=function(e,t,n){return p(e*t)},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length-1;return e.reduce((function(e,n,r){if(r>t)return e;var a=s.a.isEmpty(e)?{price:0,amount:0}:e,i=a.price,o=a.amount;return P(i,o,parseFloat(n.op),parseFloat(n.oa))}),{})},O=function(e){for(var t=e.entryPrice,n=void 0===t?6046.3:t,r=e.entryAmount,a=void 0===r?.001:r,i=e.pricePercent,o=void 0===i?-10:i,c=e.xPrice,u=void 0===c?.009:c,l=e.xAmount,m=void 0===l?1.35:l,f=[],p=parseFloat(n),d=parseFloat(a),v=Math.sign(o),g=b(parseFloat(n),parseFloat(o));p*v<v*g;){f.push({id:s.a.uniqueId(),op:p,oa:d});var P=f.length-1;p=h(p,u,v,P),d=E(d,m)}return f},x=n(42),y=n(41),j=n(56),S=n(8),A=n(25),w=function(e){return e.id},M=function(e){var t=e.onClick,n=Object(j.a)(e,["onClick"]);return a.a.createElement(A.b.Cell,Object.assign({},n,{tabIndex:0,onFocus:t}))};var F=function(e){var t=e.rows,n=e.columns,i=e.onChange,o=void 0===i?function(){}:i,u=Object(r.useState)(t),l=Object(c.a)(u,2),m=l[0],s=l[1],f=Object(r.useState)([]),p=Object(c.a)(f,2),d=p[0],v=p[1];Object(r.useEffect)((function(){s(t)}),[t]);var g=function(e){var t,n=e.added,r=e.changed,a=e.deleted;if(n){var i=m.length>0?m[m.length-1].id+1:0;t=[].concat(Object(y.a)(m),Object(y.a)(n.map((function(e,t){return Object(x.a)({id:i+t},e)}))))}if(r&&(t=m.map((function(e){return r[e.id]?Object(x.a)({},e,{},r[e.id]):e}))),a){var c=new Set(a);t=m.filter((function(e){return!c.has(e.id)}))}s(t),o(t)};return a.a.createElement(A.a,{rows:m,columns:n,getRowId:w},a.a.createElement(S.c,{onCommitChanges:g,editingCells:d,onEditingCellsChange:v,addedRows:[],onAddedRowsChange:function(){return g({added:[{}]})}}),a.a.createElement(A.b,{cellComponent:M}),a.a.createElement(A.d,null),a.a.createElement(A.e,{selectTextOnEditStart:!0}),a.a.createElement(A.c,{showAddCommand:!0,showDeleteCommand:!0}))};var I=function(){var e=Object(r.useState)({id:"settings",symbol:"tBTCF0:USTF0",entryPrice:9e3,entryAmount:.005,pricePercent:-10,xPrice:.011,xPositionAmount:0,xAmount:2,leverage:25,aff_code:"Uv2r2svs8",fee:.075,log:1}),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)(O(n)),u=Object(c.a)(o,2),m=u[0],f=u[1],P=Object(r.useState)(function(e){var t=C(e);return[{id:"exit1",price:t.price,amount:t.amount,exitPrice:b(t.price,1)},{id:"exit2",price:t.price,amount:t.amount,exitPrice:b(t.price,2)},{id:"exit3",price:t.price,amount:t.amount,exitPrice:b(t.price,3)}]}(m)),h=Object(c.a)(P,2),E=h[0],x=h[1];Object(r.useEffect)((function(){f(O(n))}),[n]);var y,j=[{name:"symbol",title:"Symbol"},{name:"entryPrice",title:"Entry Price"},{name:"entryAmount",title:"Entry Amount"},{name:"pricePercent",title:"Price Percent"},{name:"price",title:"Price",getCellValue:function(e){return b(e.entryPrice,e.pricePercent)}},{name:"xPrice",title:"x Price"},{name:"xAmount",title:"x Amount"},{name:"leverage",title:"Leverage"},{name:"aff_code",title:"Ref"},{name:"fee",title:"Fee"},{name:"log",title:"Log"}];return a.a.createElement("div",null,a.a.createElement("center",null,a.a.createElement("h3",null,"Settings")),a.a.createElement(F,{rows:[n],columns:j,onChange:function(e){return i(e[0])}}),a.a.createElement("center",null,a.a.createElement("h3",null,"Positions / Orders")),a.a.createElement("button",{onClick:function(){return f([])}},"Clear positions / orders"),a.a.createElement("button",{onClick:function(){var e=JSON.parse(prompt("copy(__state().data)"));if(e){var t=s.a.filter(e.positions,(function(e){return"ACTIVE"===e.status})).map((function(e){var t=e.id,n=e.basePrice;return{id:t,price:n,amount:e.amount,exitPirce:n}}));x(t);var r=s.a.filter(e.positions,(function(e){return e.pair===n.symbol&&"ACTIVE"===e.status})).map((function(e){return{id:e.id,op:e.basePrice,oa:e.amount}})),a=s.a.filter(e.orders.all,(function(e){return e.symbol===n.symbol.slice(1)&&"ACTIVE"===e.status&&"LIMIT"===e.type&&Math.sign(e.amount)===Math.sign(n.entryAmount)})).map((function(e){return{id:e.id,op:e.price,oa:e.amount}}));f(r.concat(a))}}},"Import Data"),a.a.createElement("button",{onClick:function(){var e=function(e,t){return t.map((function(t){var n=t.op,r=t.oa,a={type:"LIMIT",symbol:e.symbol,flags:0,price:String(n),amount:String(r),meta:{lev:e.leverage?e.leverage:void 0,aff_code:e.aff_code}};return"__dispatch("+JSON.stringify({type:"WS_REQUEST_SEND",meta:{isPublic:!1,throttle:!0},payload:JSON.stringify([0,"on",null,a])})+")"})).join("\n")}(n,m);console.log(e),l()(e)}},"Copy orders"),a.a.createElement(F,{rows:m,columns:(y=m,[{name:"price",title:"Pos Price",getCellValue:function(e){return C(y,y.indexOf(e)).price}},{name:"price diff",title:"Pos Price diff",getCellValue:function(e){var t=C(y,y.indexOf(e)-1).price,n=t-C(y,y.indexOf(e)).price,r=n/t*100;return"".concat(p(n||0)," (").concat(p(r||0,2),"%)")}},{name:"amount",title:"Pos Amount",getCellValue:function(e){return C(y,y.indexOf(e)).amount}},{name:"pc",title:"Pos Cost",getCellValue:function(e){var t=C(y,y.indexOf(e)),n=t.price,r=t.amount;return d(n,r)}},{name:"op",title:"Ord Price"},{name:"opp",title:"Ord Price diff",getCellValue:function(e){var t=(y[y.indexOf(e)-1]||{}).op,n=t-e.op,r=n/t*100;return"".concat(p(n||0)," (").concat(p(r||0,2),"%)")}},{name:"oa",title:"Ord Amount"},{name:"oc",title:"Ord Cost",getCellValue:function(e){return d(e.op,e.oa)}},{name:"pl",title:"P/L",getCellValue:function(e){var t=C(y,y.indexOf(e)),n=t.pl,r=t.plp;return"".concat(p(n,3)," (").concat(p(r,2),"%)")}}]),onChange:f}),a.a.createElement("center",null,a.a.createElement("h3",null,"Profit / Loss")),a.a.createElement(F,{rows:E,columns:[{name:"price",title:"Pos Price"},{name:"amount",title:"Pos Amount"},{name:"exitPrice",title:"Exit Price"},{name:"pl",title:"P/L",getCellValue:function(e){var t=v(e.price,e.exitPrice,e.amount,.002),n=g(e.price,e.exitPrice,e.amount);return"".concat(p(t,3)," (").concat(p(n,2),"%)")}}],onChange:x}))};o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(I,null)),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.fc271199.chunk.js.map