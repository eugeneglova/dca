(this.webpackJsonpdca=this.webpackJsonpdca||[]).push([[0],{66:function(e,t,n){e.exports=n(77)},77:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(12),o=n.n(i),c=n(24),u=n(48),l=n.n(u),m=n(17),s=n.n(m),f=function(e){var t=Math.abs(e);return t<5e-4?6:t<.005?5:t<.05?4:t<.5?3:t<1||t<1e3?2:t<1e4?1:0},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f(e);return Math.floor(e*Math.pow(10,t))/Math.pow(10,t)},d=function(e,t){return e*t},g=function(e,t,n,r){return p((d(e,t)+d(n,r))/(t+r))},v=function(e,t,n,r){var a=(t-e)*n,i=t*Math.abs(n)*r;return p(a-i)},P=function(e,t,n){var r=v(e,t,n,0),a=function(e,t,n){var r=Math.abs(n);return n<0?Math.max(r*e,r*t,0):Math.max(r*e,0)}(e,t,n);return r&&0!==a?r/a*100:0},b=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.002,i=g(e,t,n,r),o=p(t+r),c=v(i,n,o,a),u=p(P(i,n,o));return{id:s.a.uniqueId(),price:i,amount:o,op:n,oa:r,pl:c,plp:u}},h=function(e,t){return p(parseFloat(e)+parseFloat(e)*(parseFloat(t)/100))},O=function(e,t,n,r,a){return parseFloat(a)?p(e+n*e*t*Math.log10(1.3*(r+2))):p(e+n*e*t)},x=function(e,t,n){return p(e*t)},E=function(e,t,n,r){return e*(1+(1/n-r)*Math.sign(t)*-1)},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length-1,n=arguments.length>2?arguments[2]:void 0;return e.reduce((function(e,r,a){if(a>t)return e;var i=s.a.isEmpty(e)?{price:0,amount:0}:e,o=i.price,c=i.amount;return b(o,c,parseFloat(r.op),parseFloat(r.oa),n)}),{})},y=function(e,t){return[{name:"price",title:"Pos Price",getCellValue:function(t){return C(e,e.indexOf(t)).price}},{name:"liq_price",title:"Pos Liq Price (diff)",getCellValue:function(n){var r=C(e,e.indexOf(n)),a=r.price,i=r.amount,o=r.op,c=E(a,i,t.leverage,t.min_margin),u=i>0?o-c:c-o;return"".concat(p(c)," (").concat(p(u),")")}},{name:"price diff",title:"Pos Price diff",getCellValue:function(t){var n=C(e,e.indexOf(t)-1).price,r=n-C(e,e.indexOf(t)).price,a=r/n*100;return"".concat(p(r||0)," (").concat(p(a||0,2),"%)")}},{name:"amount",title:"Pos Amount",getCellValue:function(t){return C(e,e.indexOf(t)).amount}},{name:"pc",title:"Pos Cost",getCellValue:function(t){var n=C(e,e.indexOf(t)),r=n.price,a=n.amount;return p(d(r,a))}},{name:"op",title:"Ord Price"},{name:"oliq_price",title:"Ord Liq Price",getCellValue:function(n){var r=C(e,e.indexOf(n)),a=r.op,i=r.oa,o=E(a,i,t.leverage,t.min_margin);return p(o)}},{name:"opp",title:"Ord Price diff",getCellValue:function(t){var n=(e[e.indexOf(t)-1]||{}).op,r=n-t.op,a=r/n*100;return"".concat(p(r||0)," (").concat(p(a||0,2),"%)")}},{name:"oa",title:"Ord Amount"},{name:"oc",title:"Ord Cost",getCellValue:function(e){return p(d(e.op,e.oa))}},{name:"pl",title:"P/L (%)",getCellValue:function(t){var n=C(e,e.indexOf(t)),r=n.pl,a=n.plp;return"".concat(p(r,3)," (").concat(p(a,2),"%)")}},{name:"pl2",title:"Fee P/L (%)",getCellValue:function(n){var r=C(e,e.indexOf(n),2*t.fee/100),a=r.pl,i=r.plp;return"".concat(p(a,3)," (").concat(p(i,2),"%)")}}]},A=function(e){for(var t=e.entryPrice,n=void 0===t?6046.3:t,r=e.entryAmount,a=void 0===r?.001:r,i=e.pricePercent,o=void 0===i?-10:i,c=e.xPrice,u=void 0===c?.009:c,l=e.xAmount,m=void 0===l?1.35:l,f=e.xAmountAfter,p=void 0===f?2:f,d=e.log,g=void 0===d?1:d,v=[],P=parseFloat(n),b=parseFloat(a),E=Math.sign(o),C=h(parseFloat(n),parseFloat(o));P*E<E*C;){v.push({id:s.a.uniqueId(),op:P,oa:b});var y=v.length-1;P=O(P,u,E,y,g),b=y+1>=p?x(b,m):b}return v},S=function(e,t){return t.map((function(t){var n=t.op,r=t.oa,a={type:"LIMIT",symbol:e.symbol,flags:0,price:String(n),amount:String(r),meta:{lev:e.leverage?e.leverage:void 0,aff_code:e.aff_code}};return"__dispatch("+JSON.stringify({type:"WS_REQUEST_SEND",meta:{isPublic:!1,throttle:!0},payload:JSON.stringify([0,"on",null,a])})+")"})).join("\n")},_=function(e,t){return t.map((function(t){var n=t.op,r=t.oa,a={symbol:e.symbol,quantity:Math.abs(r),type:"LIMIT",timeInForce:"GTC",leverage:e.leverage,side:r>0?"BUY":"SELL",stopPrice:null,workingType:null,positionSide:r>0?"LONG":"SHORT",price:String(n)};return"__NEXT_REDUX_STORE__.dispatch("+JSON.stringify({type:"futuresOrderForm/placeOrder",payload:a})+")"})).join("\n")},M=n(42),j=n(41),F=n(56),w=n(8),I=n(25),L=function(e){return e.id},T=function(e){var t=e.onClick,n=Object(F.a)(e,["onClick"]);return a.a.createElement(I.b.Cell,Object.assign({},n,{tabIndex:0,onFocus:t}))};var V=function(e){var t=e.rows,n=e.columns,i=e.onChange,o=void 0===i?function(){}:i,u=Object(r.useState)(t),l=Object(c.a)(u,2),m=l[0],s=l[1],f=Object(r.useState)([]),p=Object(c.a)(f,2),d=p[0],g=p[1];Object(r.useEffect)((function(){s(t)}),[t]);var v=function(e){var t,n=e.added,r=e.changed,a=e.deleted;if(n){var i=m.length>0?m[m.length-1].id+1:0;t=[].concat(Object(j.a)(m),Object(j.a)(n.map((function(e,t){return Object(M.a)({id:i+t},e)}))))}if(r&&(t=m.map((function(e){return r[e.id]?Object(M.a)({},e,{},r[e.id]):e}))),a){var c=new Set(a);t=m.filter((function(e){return!c.has(e.id)}))}s(t),o(t)};return a.a.createElement(I.a,{rows:m,columns:n,getRowId:L},a.a.createElement(w.c,{onCommitChanges:v,editingCells:d,onEditingCellsChange:g,addedRows:[],onAddedRowsChange:function(){return v({added:[{}]})}}),a.a.createElement(I.b,{cellComponent:T}),a.a.createElement(I.d,null),a.a.createElement(I.e,{selectTextOnEditStart:!0}),a.a.createElement(I.c,{showAddCommand:!0,showDeleteCommand:!0}))};var k=function(){var e=Object(r.useState)({id:"settings",symbol:"tBTCF0:USTF0",entryPrice:9e3,entryAmount:.005,pricePercent:-10,xPrice:.011,xAmount:2,xAmountAfter:2,leverage:30,min_margin:.005,aff_code:"Uv2r2svs8",fee:.075,log:1}),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)(A(n)),u=Object(c.a)(o,2),m=u[0],f=u[1],d=Object(r.useState)(function(e){var t=C(e);return[{id:"exit1",price:t.price,amount:t.amount,exitPrice:h(t.price,1)},{id:"exit2",price:t.price,amount:t.amount,exitPrice:h(t.price,2)},{id:"exit3",price:t.price,amount:t.amount,exitPrice:h(t.price,3)}]}(m)),g=Object(c.a)(d,2),b=g[0],O=g[1];Object(r.useEffect)((function(){f(A(n))}),[n]);var x=[{name:"symbol",title:"Symbol"},{name:"entryPrice",title:"Entry Price"},{name:"entryAmount",title:"Entry Amount"},{name:"pricePercent",title:"Price Percent"},{name:"price",title:"Price",getCellValue:function(e){return h(e.entryPrice,e.pricePercent)}},{name:"xPrice",title:"x Price"},{name:"xAmount",title:"x Amount"},{name:"xAmountAfter",title:"x After"},{name:"leverage",title:"Leverage"},{name:"min_margin",title:"Min Margin"},{name:"aff_code",title:"Ref"},{name:"fee",title:"Fee %"},{name:"log",title:"Log10 or Linear"}];return a.a.createElement("div",null,a.a.createElement("center",null,a.a.createElement("h3",null,"Settings")),a.a.createElement(V,{rows:[n],columns:x,onChange:function(e){return i(e[0])}}),a.a.createElement("center",null,a.a.createElement("h3",null,"Positions / Orders")),a.a.createElement("button",{onClick:function(){return f([])}},"Clear positions / orders"),a.a.createElement("button",{onClick:function(){var e=JSON.parse(prompt("copy(__state().data)"));if(e){var t=s.a.filter(e.positions,(function(e){return"ACTIVE"===e.status})).map((function(e){var t=e.id,n=e.basePrice;return{id:t,price:n,amount:e.amount,exitPirce:n}}));O(t);var r=s.a.filter(e.positions,(function(e){return e.pair===n.symbol&&"ACTIVE"===e.status})).map((function(e){return{id:e.id,op:e.basePrice,oa:e.amount}})),a=s.a.filter(e.orders.all,(function(e){return e.symbol===n.symbol.slice(1)&&"ACTIVE"===e.status&&"LIMIT"===e.type&&Math.sign(e.amount)===Math.sign(n.entryAmount)})).map((function(e){return{id:e.id,op:e.price,oa:e.amount}})),i=s.a.orderBy(a,["op"],[Math.sign(n.entryAmount)<0?"asc":"desc"]);f(r.concat(i))}}},"Import Data"),a.a.createElement("button",{onClick:function(){return function(e){var t={bitfinex:S,binancefutures:_}[e](n,m);console.log(t),l()(t)}("bitfinex")}},"Copy Bitfinex orders"),a.a.createElement(V,{rows:m,columns:y(m,n),onChange:f}),a.a.createElement("center",null,a.a.createElement("h3",null,"Profit / Loss")),a.a.createElement(V,{rows:b,columns:[{name:"price",title:"Pos Price"},{name:"amount",title:"Pos Amount"},{name:"exitPrice",title:"Exit Price"},{name:"pl",title:"P/L",getCellValue:function(e){var t=v(e.price,e.exitPrice,e.amount,.002),n=P(e.price,e.exitPrice,e.amount);return"".concat(p(t,3)," (").concat(p(n,2),"%)")}}],onChange:O}))};o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(k,null)),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.874718ec.chunk.js.map